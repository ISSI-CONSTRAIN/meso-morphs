schema: '2.0'
stages:
  download_MEASURES:
    cmd: scp -r -C 
      "${SSH_USERNAME}@olympus.atmos.uw.edu:/home/disk/eos10/rmeast/MEASURES/gridded_files/"
      data/input/MEASURES/yearly/
    outs:
    - path: data/input/MEASURES/yearly/
      hash: md5
      md5: 4da18b6e4cc6e5ea5a1ef8ca3129e6ea.dir
      size: 1330131084
      nfiles: 4
  merge_yearly_MEASURES:
    cmd: python scripts/concat_chunk.py -i "data/input/MEASURES/yearly/*" -o data/output/Daily_1x1_MEASURES_MODIS-IR_NorthAtlantic.zarr
    deps:
    - path: data/input/MEASURES/yearly
      hash: md5
      md5: 4da18b6e4cc6e5ea5a1ef8ca3129e6ea.dir
      size: 1330131084
      nfiles: 4
    - path: scripts/concat_chunk.py
      hash: md5
      md5: b0774674e907a9dee144f950c5e9ebe2
      size: 906
    outs:
    - path: data/output/Daily_1x1_MEASURES_MODIS-IR_NorthAtlantic.zarr
      hash: md5
      md5: 7241fd198b7900ae5da0b3b9941a1745.dir
      size: 41268984
      nfiles: 164
  download_SGFF:
    cmd: scp -r -C 
      "${SSH_USERNAME}@olympus.atmos.uw.edu:/home/disk/eos5/rmeast/FFGS_Class/yearly/Daily*"
      data/input/SGFF/yearly/
    outs:
    - path: data/input/SGFF/yearly/
      hash: md5
      md5: bfc040e97c195c24881c5a0d1b3c1e9e.dir
      size: 4863068784
      nfiles: 18
  merge_yearly_SGFF:
    cmd: python scripts/concat_chunk.py -i "data/input/SGFF/yearly/*" -o data/output/Daily_1x1_SGFF_MODIS-IR_NorthAtlantic.zarr
    deps:
    - path: data/input/SGFF/yearly
      hash: md5
      md5: bfc040e97c195c24881c5a0d1b3c1e9e.dir
      size: 4863068784
      nfiles: 18
    - path: scripts/concat_chunk.py
      hash: md5
      md5: b0774674e907a9dee144f950c5e9ebe2
      size: 906
    outs:
    - path: data/output/Daily_1x1_SGFF_MODIS-IR_NorthAtlantic.zarr
      hash: md5
      md5: 916ba14cd379529445958a9d4775e537.dir
      size: 12729753
      nfiles: 675
  download_MCC:
    cmd: scp -r -C 
      "${SSH_USERNAME}@olympus.atmos.uw.edu:/home/disk/eos5/rmeast/MODIS_MCC/yearly_files/"
      data/input/MCC/yearly/
    outs:
    - path: data/input/MCC/yearly/
      hash: md5
      md5: ac2b299d9a97eedfa35ae469e5816ecd.dir
      size: 4308685520
      nfiles: 16
  merge_yearly_MCC:
    cmd: python scripts/concat_chunk.py -i "data/input/MCC/yearly/*" -o data/output/Daily_1x1_MCC_MODIS-IR_NorthAtlantic.zarr
    deps:
    - path: data/input/MCC/yearly
      hash: md5
      md5: ac2b299d9a97eedfa35ae469e5816ecd.dir
      size: 4308685520
      nfiles: 16
    - path: scripts/concat_chunk.py
      hash: md5
      md5: b0774674e907a9dee144f950c5e9ebe2
      size: 906
    outs:
    - path: data/output/Daily_1x1_MCC_MODIS-IR_NorthAtlantic.zarr
      hash: md5
      md5: 2e07cc5077439460d5a5decdabcadf77.dir
      size: 119424425
      nfiles: 602
  create_reference_SGFF:
    cmd: python scripts/create_reference_file.py data/output/Daily_1x1_SGFF_MODIS-IR_NorthAtlantic.zarr
      catalog/references/SGFF.json
    deps:
    - path: data/output/Daily_1x1_SGFF_MODIS-IR_NorthAtlantic.zarr
      hash: md5
      md5: 916ba14cd379529445958a9d4775e537.dir
      size: 12729753
      nfiles: 675
    - path: scripts/create_reference_file.py
      hash: md5
      md5: 2f067be2da506244c47fecaf5266531c
      size: 1601
    outs:
    - path: catalog/references/SGFF.json
      hash: md5
      md5: 8b522061800ffa54202d7a0f74e3b5c4
      size: 66669
  create_reference_MEASURES:
    cmd: python scripts/create_reference_file.py data/output/Daily_1x1_MEASURES_MODIS-IR_NorthAtlantic.zarr
      catalog/references/MEASURES.json
    deps:
    - path: data/output/Daily_1x1_MEASURES_MODIS-IR_NorthAtlantic.zarr
      hash: md5
      md5: 7241fd198b7900ae5da0b3b9941a1745.dir
      size: 41268984
      nfiles: 164
    - path: scripts/create_reference_file.py
      hash: md5
      md5: 2f067be2da506244c47fecaf5266531c
      size: 1601
    outs:
    - path: catalog/references/MEASURES.json
      hash: md5
      md5: c277b4a7fe5952a9bf0c8fba6a1bdddb
      size: 16080
  create_reference_MCC:
    cmd: python scripts/create_reference_file.py data/output/Daily_1x1_MCC_MODIS-IR_NorthAtlantic.zarr
      catalog/references/MCC.json
    deps:
    - path: data/output/Daily_1x1_MCC_MODIS-IR_NorthAtlantic.zarr
      hash: md5
      md5: 2e07cc5077439460d5a5decdabcadf77.dir
      size: 119424425
      nfiles: 602
    - path: scripts/create_reference_file.py
      hash: md5
      md5: 2f067be2da506244c47fecaf5266531c
      size: 1601
    outs:
    - path: catalog/references/MCC.json
      hash: md5
      md5: 19a382cb4d52d58b1ed352ec35f35ec1
      size: 59442
